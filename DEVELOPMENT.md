# CookiePusher - å¼€å‘æŒ‡å—

## ğŸš€ æŠ€æœ¯æ ˆ

- **Vue 3** - ç°ä»£åŒ–å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Chrome Extension Manifest V3** - æœ€æ–°æµè§ˆå™¨æ‰©å±•API
- **CryptoJS** - åŠ å¯†åº“
- **ECharts** - æ•°æ®å¯è§†åŒ–å›¾è¡¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ popup/                    # Popupå¼¹çª—ç•Œé¢
â”‚   â”œâ”€â”€ App.vue              # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ index.html           # HTMLå…¥å£
â”‚   â”œâ”€â”€ index.ts             # TypeScriptå…¥å£
â”‚   â””â”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚       â”œâ”€â”€ CurrentPageView.vue
â”‚       â”œâ”€â”€ LogView.vue
â”‚       â”œâ”€â”€ ManagedDomainsView.vue
â”‚       â”œâ”€â”€ SettingsView.vue
â”‚       â””â”€â”€ StatsView.vue
â”œâ”€â”€ options/                 # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ OptionsPage.vue
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ background/              # åå°è„šæœ¬
â”‚   â””â”€â”€ index.ts             # Service Worker
â”œâ”€â”€ offscreen/               # ç¦»å±æ–‡æ¡£
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ cookies/                 # Cookieç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ CookiesPage.vue
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ CookieDetails.vue
â”œâ”€â”€ welcome/                 # æ¬¢è¿é¡µé¢
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ navigation.js
â”‚   â””â”€â”€ redirect.js
â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ message.ts
â””â”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
    â””â”€â”€ extension.d.ts

api_service/                 # åç«¯APIæœåŠ¡
â”œâ”€â”€ backend/                 # Goåç«¯æœåŠ¡
â””â”€â”€ cf/                      # Cloudflare WorkersæœåŠ¡
```

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¼€å‘æ¨¡å¼

```bash
npm run dev
```

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­é‡è½½ã€‚ä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨é‡æ–°æ„å»ºã€‚

### 3. åç«¯å¼€å‘æ¨¡å¼

```bash
npm run dev:backend
```

å¯åŠ¨Goåç«¯æœåŠ¡çš„çƒ­é‡è½½å¼€å‘æ¨¡å¼ã€‚

### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºä¼˜åŒ–åçš„ç”Ÿäº§ç‰ˆæœ¬åˆ° `dist/` ç›®å½•ã€‚

### 5. ç±»å‹æ£€æŸ¥

```bash
npm run type-check
```

è¿è¡ŒTypeScriptç±»å‹æ£€æŸ¥ï¼Œä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ã€‚

## ğŸ”§ æ’ä»¶åŠ è½½

### Chrome/Edge æµè§ˆå™¨

1. æ‰“å¼€æ‰©å±•ç®¡ç†é¡µé¢ï¼š`chrome://extensions/` æˆ– `edge://extensions/`
2. å¼€å¯"å¼€å‘è€…æ¨¡å¼"
3. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
4. é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `dist/` æ–‡ä»¶å¤¹
5. æ’ä»¶å³å¯åŠ è½½å¹¶è¿è¡Œ

### å¼€å‘è°ƒè¯•

- **Popupè°ƒè¯•**: å³é”®ç‚¹å‡»æ’ä»¶å›¾æ ‡ â†’ "æ£€æŸ¥å¼¹å‡ºå†…å®¹"
- **Optionsé¡µé¢è°ƒè¯•**: å³é”®ç‚¹å‡»æ’ä»¶å›¾æ ‡ â†’ "é€‰é¡¹" â†’ æ‰“å¼€å¼€å‘è€…å·¥å…·
- **Backgroundè°ƒè¯•**: æ‰©å±•ç®¡ç†é¡µé¢ â†’ ç‚¹å‡»æ’ä»¶çš„"Service Worker"é“¾æ¥
- **Offscreenè°ƒè¯•**: æ‰©å±•ç®¡ç†é¡µé¢ â†’ æŸ¥çœ‹èƒŒæ™¯é¡µæ§åˆ¶å°ä¸­çš„offscreenç›¸å…³æ—¥å¿—

## ğŸ“‹ å¼€å‘è§„èŒƒ

### TypeScript è§„èŒƒ

- ä½¿ç”¨ä¸¥æ ¼çš„TypeScripté…ç½®
- ä¸ºæ‰€æœ‰å‡½æ•°å’Œå˜é‡æ·»åŠ ç±»å‹æ³¨è§£
- ä½¿ç”¨æ¥å£å®šä¹‰æ•°æ®ç»“æ„
- é¿å…ä½¿ç”¨ `any` ç±»å‹
- ç±»å‹å®šä¹‰æ–‡ä»¶æ”¾åœ¨ `types/` ç›®å½•ä¸‹

### Vue 3 è§„èŒƒ

- ä½¿ç”¨ Composition API
- å•æ–‡ä»¶ç»„ä»¶ç»“æ„ï¼š`<template>`, `<script setup>`, `<style scoped>`
- ä½¿ç”¨ `ref` å’Œ `reactive` ç®¡ç†çŠ¶æ€
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- é¡µé¢ç»„ä»¶æ”¾åœ¨ `views/` ç›®å½•ä¸‹ï¼Œé€šç”¨ç»„ä»¶æ”¾åœ¨ `components/` ç›®å½•ä¸‹

### Chrome Extension è§„èŒƒ

- ä½¿ç”¨ Manifest V3 è§„èŒƒ
- Service Worker å¤„ç†åå°ä»»åŠ¡
- ä½¿ç”¨ Offscreen Document å¤„ç†éœ€è¦ DOM çš„æ“ä½œ
- éµå¾ªæœ€å°æƒé™åŸåˆ™é…ç½®æƒé™

### ä»£ç é£æ ¼

- ä½¿ç”¨ Prettier æ ¼å¼åŒ–ä»£ç 
- éµå¾ª ESLint è§„åˆ™
- ç»„ä»¶æ ·å¼ä½¿ç”¨ CSS Scoped
- ä½¿ç”¨è¯­ä¹‰åŒ–çš„ç±»å

## ğŸ”„ æ›´æ–°æµç¨‹

1. ä¿®æ”¹ä»£ç 
2. è¿è¡Œ `npm run build` æ„å»º
3. åœ¨æ‰©å±•ç®¡ç†é¡µé¢ç‚¹å‡»åˆ·æ–°æŒ‰é’®
4. æµ‹è¯•åŠŸèƒ½

## ğŸ§ª æµ‹è¯•

### ç±»å‹æ£€æŸ¥

```bash
npm run type-check
```

### æ‰‹åŠ¨æµ‹è¯•æ¸…å•

- [ ] Popupç•Œé¢æ­£å¸¸æ˜¾ç¤º
- [ ] Cookieè·å–åŠŸèƒ½æ­£å¸¸
- [ ] Cookieç®¡ç†é¡µé¢åŠŸèƒ½æ­£å¸¸
- [ ] åŸŸåç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] è®¾ç½®é¡µé¢åŠŸèƒ½æ­£å¸¸
- [ ] ç»Ÿè®¡é¡µé¢æ˜¾ç¤ºæ­£å¸¸
- [ ] Service Workerè¿è¡Œæ­£å¸¸
- [ ] Offscreen DocumentåŠŸèƒ½æ­£å¸¸
- [ ] å®šæ—¶ä¿æ´»åŠŸèƒ½æ­£å¸¸
- [ ] Cookieå˜æ›´ç›‘å¬æ­£å¸¸
- [ ] APIæ¨é€åŠŸèƒ½æ­£å¸¸

## ğŸ“¦ å‘å¸ƒ

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
npm run build
```

æ„å»ºåçš„æ–‡ä»¶åœ¨ `dist/` ç›®å½•ï¼Œå¯ç›´æ¥ç”¨äºå‘å¸ƒã€‚

### ç‰ˆæœ¬ç®¡ç†

- æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬å·
- æ›´æ–° `manifest.json` ä¸­çš„ç‰ˆæœ¬å·
- æäº¤ Git æ ‡ç­¾

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ’ä»¶æ— æ³•åŠ è½½ï¼Ÿ
A: æ£€æŸ¥ `manifest.json` é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç‰¹åˆ«æ˜¯è·¯å¾„é…ç½®å’Œæƒé™è®¾ç½®ã€‚

### Q: çƒ­é‡è½½ä¸å·¥ä½œï¼Ÿ
A: ç¡®ä¿è¿è¡Œ `npm run dev` å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶æ£€æŸ¥æµè§ˆå™¨æ‰©å±•æ˜¯å¦å·²é‡æ–°åŠ è½½ã€‚

### Q: TypeScript ç¼–è¯‘é”™è¯¯ï¼Ÿ
A: æ£€æŸ¥ç±»å‹æ³¨è§£æ˜¯å¦æ­£ç¡®ï¼Œè¿è¡Œ `npm run type-check` æ£€æŸ¥ç±»å‹ã€‚

### Q: Service Worker ä¸å·¥ä½œï¼Ÿ
A: æ£€æŸ¥ Manifest V3 çš„ Service Worker é…ç½®ï¼Œç¡®ä¿æ²¡æœ‰ä½¿ç”¨å·²å¼ƒç”¨çš„ APIã€‚

### Q: Offscreen Document åˆ›å»ºå¤±è´¥ï¼Ÿ
A: æ£€æŸ¥æ˜¯å¦æ­£ç¡®ç”³è¯·äº† `offscreen` æƒé™ï¼Œä»¥åŠåˆ›å»ºåŸå› å’Œè¯´æ˜æ˜¯å¦åˆç†ã€‚

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½è°ƒè¯•

### Service Worker è°ƒè¯•
1. æ‰“å¼€æ‰©å±•ç®¡ç†é¡µé¢
2. ç‚¹å‡»"Service Worker"é“¾æ¥
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—å’Œç½‘ç»œè¯·æ±‚

### Cookie å˜æ›´ç›‘å¬è°ƒè¯•
1. åœ¨ Service Worker æ§åˆ¶å°ä¸­æŸ¥çœ‹å˜æ›´æ—¥å¿—
2. æ£€æŸ¥ `chrome.cookies.onChanged` äº‹ä»¶æ˜¯å¦æ­£ç¡®è§¦å‘
3. éªŒè¯å»æŠ–æœºåˆ¶æ˜¯å¦æ­£å¸¸å·¥ä½œ

### å®šæ—¶ä¿æ´»è°ƒè¯•
1. æ£€æŸ¥ `chrome.alarms` API æ˜¯å¦æ­£ç¡®è®¾ç½®
2. æŸ¥çœ‹ Offscreen Document çš„åˆ›å»ºå’Œé”€æ¯æ—¥å¿—
3. éªŒè¯ Cookie å¿«ç…§å¯¹æ¯”é€»è¾‘

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Chrome Extension Manifest V3](https://developer.chrome.com/docs/extensions/mv3/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [CryptoJS æ–‡æ¡£](https://cryptojs.gitbook.io/docs/)
- [ECharts æ–‡æ¡£](https://echarts.apache.org/)

---

**Happy Coding! ğŸ‰**
